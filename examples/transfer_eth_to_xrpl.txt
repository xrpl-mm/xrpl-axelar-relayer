AMOUNT=1000000000000000000

cast send $ETH "approve(address,uint256)" $XRPL_EVM_SIDECHAIN_ITS $AMOUNT --rpc-url $XRPL_EVM_SIDECHAIN_RPC_URL --private-key $PRIVATE_KEY

cast send $XRPL_EVM_SIDECHAIN_ITS "function interchainTransfer(bytes32 tokenId, string destinationChain, bytes destinationAddress, uint256 amount, bytes metadata, uint256 gasValue)" $ETH_TOKEN_ID xrpl "0x928846BAF59BD48C28B131855472D04C93BBD0B7" $AMOUNT "0x" 0 --private-key $PRIVATE_KEY --rpc-url $XRPL_EVM_SIDECHAIN_RPC_URL

// https://explorer.xrplevm.org/tx/0xb7441c4bade3ce322264b33c769dea181ce2e0c151984c2fd55924f721333382?tab=index

curl -H "Authorization: Bearer $API_TOKEN" -X POST $API_ENDPOINT -d "0000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000047872706c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000000000000807e7301d2070bb8753685fd3739aafacb88b82f24b921840241f936b3811fe800000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000014ac2fd8e04577cc5199d74e1a681847803a7712490000000000000000000000000000000000000000000000000000000000000000000000000000000000000014928846baf59bd48c28b131855472d04c93bbd0b70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"

axelard tx wasm execute $XRPL_EVM_SIDECHAIN_GATEWAY '{"verify_messages":[{"cc_id":{"source_chain":"xrpl-evm-sidechain","message_id":"0xb7441c4bade3ce322264b33c769dea181ce2e0c151984c2fd55924f721333382-2"},"source_address":"'$XRPL_EVM_SIDECHAIN_ITS'","destination_chain":"axelar","destination_address":"axelar13ehuhysn5mqjeaheeuew2gjs785f6k7jm8vfsqg3jhtpkwppcmzqtedxty","payload_hash":"ee4a05ee7582bf86217694a25875eac0b24429cf6de286631f88d699180ebe7b"}]}' "${ARGS[@]}"

axelard tx wasm execute $XRPL_EVM_SIDECHAIN_GATEWAY '{"route_messages":[{"cc_id":{"source_chain":"xrpl-evm-sidechain","message_id":"0xb7441c4bade3ce322264b33c769dea181ce2e0c151984c2fd55924f721333382-2"},"source_address":"'$XRPL_EVM_SIDECHAIN_ITS'","destination_chain":"axelar","destination_address":"axelar13ehuhysn5mqjeaheeuew2gjs785f6k7jm8vfsqg3jhtpkwppcmzqtedxty","payload_hash":"ee4a05ee7582bf86217694a25875eac0b24429cf6de286631f88d699180ebe7b"}]}' "${ARGS[@]}"

axelard tx wasm execute $AXELARNET_GATEWAY '{"execute":{"cc_id":{"source_chain":"xrpl-evm-sidechain","message_id":"0xb7441c4bade3ce322264b33c769dea181ce2e0c151984c2fd55924f721333382-2"},"payload":"0000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000047872706c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000000000000807e7301d2070bb8753685fd3739aafacb88b82f24b921840241f936b3811fe800000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000014ac2fd8e04577cc5199d74e1a681847803a7712490000000000000000000000000000000000000000000000000000000000000000000000000000000000000014928846baf59bd48c28b131855472d04c93bbd0b70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"}}' "${ARGS[@]}"

axelard tx wasm execute $XRPL_MULTISIG_PROVER '{"construct_proof":{"cc_id":{"source_chain":"axelar","message_id":"0xae1dfbc0b61849e587b038776d1f60094aa59b6d14e44e48647c8b7f586bb62b-2119"},"payload":"0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000127872706c2d65766d2d73696465636861696e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000000000000807e7301d2070bb8753685fd3739aafacb88b82f24b921840241f936b3811fe800000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000014ac2fd8e04577cc5199d74e1a681847803a7712490000000000000000000000000000000000000000000000000000000000000000000000000000000000000014928846baf59bd48c28b131855472d04c93bbd0b70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"}}' "${ARGS[@]}"

axelard query wasm contract-state smart $XRPL_MULTISIG_PROVER '{"proof":{"multisig_session_id":"84"}}' --node $RPC_URL --output json

// {"data":{"status":"completed","unsigned_tx_hash":"228b7c84176536ed36fe5a636dfcabf1a91a930052afba16eee45def4f8c722c","tx_blob":"120000220000000024000000002029006a072e61d4838d7ea4c68000000000000000000000000000455448000000000053e8ecb19c39ed8cfecc1b2729d2d6305bb1de10684000000000000bb873008114b51a21de7d16f27e32975dd76bacb7e678b75a368314928846baf59bd48c28b131855472d04c93bbd0b7f3e01073210226bb43b7e6a6ebd4a07c852bb2f054b32a53286f4465ff1cf9c0d56efb1fe11374473045022100ebd2ceca2e520bec6a95b9a8e1c4a2a94babc162403dc7018515fbcee2b3786802205753222813d6cac50da00bd928a6867ea62bb94aa2a8a5c60628b656e3ace56d811459599907c56ea92593f696d6b279264c5f80709de1f1f9ea7c136d756c74697369675f73657373696f6e5f69647d0154e1f1"}}

// https://devnet.xrpl.org/transactions/7FFD99C31E7FFAE2835208B9EE0617C15B357776C97EE2E16268A86E7002C478

axelard tx wasm execute $XRPL_GATEWAY '{"verify_messages":[{"prover_message":"7FFD99C31E7FFAE2835208B9EE0617C15B357776C97EE2E16268A86E7002C478"}]}' "${ARGS[@]}"

axelard tx wasm execute $XRPL_MULTISIG_PROVER '{"confirm_tx_status":{"multisig_session_id":"84","signed_tx_hash":"7FFD99C31E7FFAE2835208B9EE0617C15B357776C97EE2E16268A86E7002C478","signer_public_keys":[{"ecdsa":"0226BB43B7E6A6EBD4A07C852BB2F054B32A53286F4465FF1CF9C0D56EFB1FE113"}]}}' "${ARGS[@]}"
